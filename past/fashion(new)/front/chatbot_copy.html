<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Wardrobe Chatbot</title>
  <link rel="stylesheet" href="./resources/css/style.css" />
  <style>
    /* [중요] 전체 레이아웃 설정 */
    html, body {
      height: 100%;
      margin: 0;
      display: flex;
      flex-direction: column; /* 위(헤더)-아래(메인) 배치 */
      overflow: hidden; /* 바깥 스크롤 방지 */
    }

    .th-layout-main {
      flex: 1; /* 헤더 제외 남은 공간 모두 차지 */
      display: flex;
      overflow: hidden;
    }

    .chatbot-container {
      display: flex;
      flex: 1;
      background-color: #f9f9f9;
    }

    /* 사이드바 */
    .chatbot-sidebar {
      width: 280px;
      background-color: white;
      border-right: 1px solid #e0e0e0;
      display: flex;
      flex-direction: column;
    }

    /* 채팅 영역 */
    .chat-area {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
    }

    /* 입력창 고정 */
    .input-area {
      padding: 20px;
      background-color: white;
      border-top: 1px solid #e0e0e0;
    }

    /* (기타 스타일 생략 - 이전과 동일) */
    .message { display: flex; gap: 12px; margin-bottom: 20px; }
    .message.user { flex-direction: row-reverse; }
    .message-content { background: #fff; padding: 15px; border-radius: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
    .message.user .message-content { background: #666; color: #fff; }
  </style>
</head>
<body>

<header class="th-layout-header">
  <div class="campland-N1" id="OXmkNRNChQ">
    <div class="header-container container-full">
      <div class="header-left">
        <h2 class="header-title">
          <a href="javascript:void(0)">
            <img src="./resources/images/hwamyeon_kaepcheo_2026-01-20_152751-removebg-preview.png" alt="logo" />
          </a>
        </h2>
      </div>
      <div class="header-center">
        <div class="header-gnb">
          <ul class="header-gnblist">
            <li class="header-gnbitem">
              <a class="header-gnblink" href="javascript:void(0)">
                <span>Chatbot</span>
              </a>
            </li>
            <li class="header-gnbitem">
              <a class="header-gnblink" href="javascript:void(0)">
                <span>Celeb's Pick</span>
              </a>
            </li>
            <li class="header-gnbitem">
              <a class="header-gnblink" href="javascript:void(0)">
                <span>Smart Wardrobe</span>
              </a>
            </li>
            <li class="header-gnbitem">
              <a class="header-gnblink" href="javascript:void(0)">
                <span>Lookbook</span>
              </a>
            </li>
            <li class="header-gnbitem">
              <a class="header-gnblink" href="javascript:void(0)">
                <span>FAQ</span>
              </a>
            </li>
          </ul>
        </div>
      </div>
      <div class="header-right">
        <!-- 로그인 전 -->
        <div id="before-login" class="header-auth" style="display: none;">
          <a href="./login.html" class="header-gnblink"><span>Login</span></a>
        </div>
        <!-- 로그인 후 -->
        <div id="after-login" class="header-auth" style="display: none; align-items: center; gap: 12px;">
          <a href="./mypage.html" class="header-gnblink" style="display: flex; align-items: center; gap: 8px;">
            <span>My page</span>
          </a>
        </div>
      </div>

      <script>
        // 로그인 상태 체크 (localStorage 기반 예시)
        function checkLoginStatus() {
          const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
          const beforeLogin = document.getElementById('before-login');
          const afterLogin = document.getElementById('after-login');

          if (isLoggedIn) {
            beforeLogin.style.display = 'none';
            afterLogin.style.display = 'flex';
          } else {
            beforeLogin.style.display = 'flex';
            afterLogin.style.display = 'none';
          }
        }

        // 페이지 로드 시 체크
        checkLoginStatus();
      </script>
    </div>
  </div>
</header>

  <main class="th-layout-main">
    <div class="chatbot-container">
      <aside class="chatbot-sidebar">
        <div style="padding:20px; font-weight:bold;">Smart Wardrobe</div>
        <div class="category-list" style="padding:0 20px;">
          <p>TOP</p>
          <p>BOTTOM</p>
          <p>OUTER</p>
        </div>
      </aside>

      <section class="chat-area">
        <div class="chat-messages" id="chatMessages">
          <div class="message ai">
            <div class="message-content">안녕하세요! 오늘 어떤 스타일을 추천해 드릴까요?</div>
          </div>
        </div>

        <div class="input-area">
          <div style="display:flex; background:#f5f5f5; border-radius:25px; padding:10px 20px;">
            <input type="text" id="messageInput" style="flex:1; border:none; background:none; outline:none;" placeholder="메시지를 입력하세요...">
            <button onclick="sendMessage()" style="border:none; background:none; cursor:pointer;">➤</button>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script>
    // 2. 메시지 전송 로직
    function sendMessage() {
      const input = document.getElementById('messageInput');
      if (!input.value.trim()) return;
      
      const chatMessages = document.getElementById('chatMessages');
      const msg = `<div class="message user"><div class="message-content">${input.value}</div></div>`;
      chatMessages.insertAdjacentHTML('beforeend', msg);
      
      input.value = '';
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }
  </script>
</body>
</html>